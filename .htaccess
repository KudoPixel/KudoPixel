
# KudoPixel Project - .htaccess
# The loyal gatekeeper of our empire.

<IfModule mod_rewrite.c>
    RewriteEngine On

    # Rule 1: Redirect all traffic to the frontend directory
    # If the request is NOT for the backend, serve it from the frontend folder.
    RewriteCond %{REQUEST_URI} !^/backend/
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ frontend/$1 [L]

    # Rule 2: Route all API calls through our single backend entry point
    # All requests going to /backend/api/... will be handled by our main gate.
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^backend/public/(.*)$ backend/public/index.php [L]
</IfModule>

# Optional: Add some security headers
<IfModule mod_headers.c>
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "SAMEORIGIN"
    Header set X-XSS-Protection "1; mode=block"
</IfModule>
